products.csv


product_id,product_name

1,Red T-Shirt

2,Blue Jeans

3,Running Shoes

4,Wireless Mouse

5,Coffee Mug


Python Iterator:

import csv

from pathlib import Path


FILENAME = "products.csv"

FIELDNAMES = ["product_id", "product_name"]



def init_csv():

"""Create the CSV with a header if it doesn't exist yet."""

if not Path(FILENAME).exists():

with open(FILENAME, "w", newline="", encoding="utf-8") as f:

writer = csv.DictWriter(f, fieldnames=FIELDNAMES)

writer.writeheader()



def get_next_id():

"""Find the next product_id based on the last row in the CSV."""

if not Path(FILENAME).exists():

return 1


last_id = 0

with open(FILENAME, newline="", encoding="utf-8") as f:

reader = csv.DictReader(f)

for row in reader:

try:

last_id = int(row["product_id"])

except (ValueError, KeyError):

continue

return last_id + 1



def main():

init_csv()

max_new_entries = 5 # quick list of 5

next_id = get_next_id()


with open(FILENAME, "a", newline="", encoding="utf-8") as f:

writer = csv.DictWriter(f, fieldnames=FIELDNAMES)


count = 0

while count < max_new_entries:

name = input(

f"Enter product name #{count + 1} "

"(or press Enter with no text to finish): "

).strip()


# Allow user to break early when entries are complete

if not name:

print("No input detected. Stopping entry.")

break


writer.writerow({"product_id": next_id, "product_name": name})

print(f"Added: [{next_id}] {name}")


next_id += 1

count += 1


print("Done. Products have been saved to", FILENAME)



if __name__ == "__main__":

main()
